Received: from mail.montana.com (mailB.montana.com [199.2.139.117])
	by aleve.media.mit.edu (8.9.3/8.9.3/+ALEVE) with ESMTP id MAA21894
	for <handyboard@media.mit.edu>; Fri, 10 Mar 2000 12:34:05 -0500 (EST)
Received: from selway.umt.edu (golfswit.montana.com [208.23.167.3])
	by mail.montana.com (8.9.3/8.9.3) with ESMTP id KAA16763
	for <handyboard@media.mit.edu>; Fri, 10 Mar 2000 10:23:42 -0700 (MST)
Message-Id: <38C931B3.AE5D71D0@selway.umt.edu>
Date: Fri, 10 Mar 2000 10:32:35 -0700
From: Will Bain <willb@selway.umt.edu>
X-Mailer: Mozilla 4.7 [en] (Win98; U)
X-Accept-Language: en
Mime-Version: 1.0
To: Handyboard Mailing List <handyboard@media.mit.edu>
Subject: Re: Sonar Assembly
References: <Fr7sn7.HEL@lugnet.com>
Content-Type: multipart/mixed;
 boundary="------------A7218F61B0520F2A8CC27B8E"

This is a multi-part message in MIME format.
--------------A7218F61B0520F2A8CC27B8E
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-MIME-Autoconverted: from 8bit to quoted-printable by aleve.media.mit.edu id MAA08650

Joe Kopena wrote:
>=20
> We're looking into buying a sonar ranging module from Acroname for use =
in our
> lab. Does anyone reccomend a particular offering of theirs? If we buy t=
his
> unit:
>      http://acroname.com/robotics/parts/R14-SONAR1.html
> All we will have to do to connect it to the HandyBoard are the wiring s=
teps
> laid out on the official HandyBoard page, correct? Hopefully?

Yup. Works great. However, you may want to use the attached version of th=
e sonar sampling code in place of the code found on the HB web site. The =
only real difference is that this version takes three readings in rapid s=
uccession and then returns the median value. This results in much more ac=
curate distance measurements.

-- Will

+---------------------------------------------------------+
|                       ^^     <^ ^>                      |
|                     /  =F2=F3    =F3=B0=B0 \                      |
|                     /  =3DY=3D    U   \                     |
|       Wendy, Will, Tatoosh & Tenzing                    |
+---------------------------------------------------------+

Curiosity may, or may not, have killed Schrodinger's cat.
                                                -- townba
--------------A7218F61B0520F2A8CC27B8E
Content-Type: application/x-unknown-content-type-c_auto_file;
 name="sonar_new.c"
Content-Disposition: inline;
 filename="sonar_new.c"
Content-Transfer-Encoding: base64

LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiogQUREUkVTUyAg
IE5BTUUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5PVEVTICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQoqICAweDEwMDAgICBQb3J0IEEgRGF0
YSBSZWcgICAgICAgICAgICAgICAgIChQT1JUQSkgICBsb3cgYml0IGlzIElucHV0IENhcHR1
cmUgMyAgICAgICAgICAgICAgKg0KKiAgMHgxMDA4ICAgUG9ydCBEIERhdGEgUmVnICAgICAg
ICAgICAgICAgICAoUE9SVEQpICAgQjUsIEI0LCBCMywgQjIgPT4gU1MsIFNDSywgTU9TSSwg
TUlTTyAgICoNCiogIDB4MTAwOSAgIERhdGEgRGlyZWN0aW9uIFJlZyBmb3IgUG9ydCBEICAg
KEREUkQpICAgIHNldCA9PiBvdXRwdXQsIGNsZWFyID0+IGlucHV0ICAgICAgICAgICAqDQoq
ICAweDEwMEUgICBUaW1lciBDb3VudGVyIFJlZyAgICAgICAgICAgICAgIChUQ05UKSAgICAw
eDEwMEUgaXMgaGlnaCBieXRlLCAweDEwMEYgaXMgbG93IGJ5dGUgKg0KKiAgMHgxMDE0ICAg
VGltZXIgSW5wdXQgQ2FwdHVyZSBSZWcgMyAgICAgICAoVElDMykgICAgMHgxMDE0IGlzIGhp
Z2ggYnl0ZSwgMHgxMDE1IGlzIGxvdyBieXRlICoNCiogIDB4MTAyMSAgIFRpbWVyIENvbnRy
b2wgUmVnIDIgICAgICAgICAgICAgKFRDVEwyKSAgIEIxLEIwPTAxID0+IFRJQzMgcmlzaW5n
IGVkZ2UgICAgICAgICAgICAqDQoqICAweDEwMjMgICBNYWluIFRpbWVyIEludGVycnVwdCBG
bGFnIFJlZyAxIChURkxHMSkgICBCMCA9PiBJQzNGIChpbnB1dCBjYXB0dXJlIDMgZmxhZykg
ICAgICAgKg0KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq
KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCg0K
LyogTXVzdCBiZSBjYWxsZWQgKG9ubHkgb25jZSkgYmVmb3JlIHNvbmFyKCkgaXMgdXNlZCAq
Lw0Kdm9pZCBzb25hcl9pbml0KCkgew0KICAgYml0X3NldCggMHgxMDA5LCAweDMwICk7ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBTZXQgcGlucyBTUyAmIFNDSyBm
b3Igb3V0cHV0ICovDQogICBiaXRfc2V0KCAweDEwMjEsIDEgKTsgYml0X2NsZWFyKCAweDEw
MjEsIDIgKTsgICAgICAgICAgICAgIC8qIFNldCBUSUMzIGZvciByaXNpbmcgZWRnZSAqLw0K
fQ0KDQoNCi8qIFJldHVybnMgdGhlIGFwcHJveGltYXRlIGRpc3RhbmNlIGluIGNlbnRpbWV0
ZXJzICovDQppbnQgc29uYXIoKSB7DQogICBpbnQgaSwgc3RhcnRfdGltZSwgcmVzdWx0WzNd
LCBtZWRpYW47DQoNCiAgIC8qIGNvbGxlY3QgdGhyZWUgcmVhZGluZ3MgKi8NCiAgIGZvcigg
aSA9IDA7IGkgPCAzOyBpKysgKSB7DQoNCiAgICAgIHBva2UoIDB4MTAyMywgMSApOyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogY2xlYXIgVElDMyBmbGFnICov
DQogICAgICBzdGFydF90aW1lID0gcGVla3dvcmQoIDB4MTAwRSApOyAgICAgICAgICAgICAg
ICAgICAgICAgIC8qIGNhcHR1cmUgc3RhcnQgdGltZSAqLw0KICAgICAgcG9rZSggMHgxMDA4
LCAweDIwICk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB0cmlnZ2Vy
IHBpbmcgKi8NCg0KICAgICAgd2hpbGUoICggcGVla3dvcmQoIDB4MTAwRSApIC0gc3RhcnRf
dGltZSApIDwgMTIwMCApOyAgICAvKiBhbGxvdyBhIGJsYW5raW5nIGludGVydmFsICovDQog
ICAgICBiaXRfc2V0KCAweDEwMDgsIDB4MzAgKTsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIC8qIGluaGliaXQgZnVydGhlciBibGFua2luZyAqLw0KDQogICAgICB3aGlsZSgg
ISAoIHBlZWsoIDB4MTAwMCApICYgMHgwMSApICkgeyAgICAgICAgICAgICAgICAgIC8qIHdh
aXQgdW50aWwgZWNobyByZWNlaXZlZCAqLw0KICAgICAgICAgaWYoICggcGVla3dvcmQoIDB4
MTAwRSApIC0gc3RhcnRfdGltZSApIDwgMCApIGJyZWFrOyAvKiBhYm9ydCBpZiB0b28gbXVj
aCB0aW1lIGVsYXBzZWQgKi8NCiAgICAgICAgIGRlZmVyKCk7ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogbGV0IG90aGVycyBydW4gd2hpbGUgd2Fp
dGluZyAqLw0KICAgICAgfQ0KDQogICAgICBiaXRfY2xlYXIoIDB4MTAwOCwgMHgyMCApOyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHJlc2V0IHBpbmcgdHJpZ2dlciAqLw0K
ICAgICAgYml0X2NsZWFyKCAweDEwMDgsIDB4MzAgKTsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAvKiByZXNldCBibGFua2luZyBpbmhpYml0ICovDQoNCiAgICAgIHJlc3VsdFtp
XSA9IHBlZWt3b3JkKCAweDEwMTQgKSAtIHN0YXJ0X3RpbWU7ICAgICAgICAgICAgLyogY2Fs
Y3VsYXRlIGVsYXBzZWQgdGltZSAqLw0KDQogICAgICBtc2xlZXAoIDc1TCApOyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHBhdXNlIGJldHdlZW4gcmVh
ZGluZ3MgKi8NCiAgIH0NCg0KICAgLyogY2FsY3VsYXRlIHRoZSBtZWRpYW4gb2YgdGhlIHRo
cmVlIHJlc3VsdHMgKi8NCiAgIGlmKCByZXN1bHRbMF0gPCByZXN1bHRbMV0gKSB7DQogICAg
ICBpZiggcmVzdWx0WzFdIDwgcmVzdWx0WzJdICkgbWVkaWFuID0gcmVzdWx0WzFdOw0KICAg
ICAgZWxzZSBpZiggcmVzdWx0WzBdIDwgcmVzdWx0WzJdICkgbWVkaWFuID0gcmVzdWx0WzJd
Ow0KICAgICAgZWxzZSBtZWRpYW4gPSByZXN1bHRbMF07DQogICB9DQogICBlbHNlIHsNCiAg
ICAgIGlmKCByZXN1bHRbMF0gPCByZXN1bHRbMl0gKSBtZWRpYW4gPSByZXN1bHRbMF07DQog
ICAgICBlbHNlIGlmKCByZXN1bHRbMV0gPCByZXN1bHRbMl0gKSBtZWRpYW4gPSByZXN1bHRb
Ml07DQogICAgICBlbHNlIG1lZGlhbiA9IHJlc3VsdFsxXTsNCiAgIH0NCg0KICAgcmV0dXJu
IG1lZGlhbiAvIDE0MzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAv
KiBkaXZpZGUgYnkgY3ljbGVzIHBlciBjbSAqLw0KfQ0K
--------------A7218F61B0520F2A8CC27B8E--


